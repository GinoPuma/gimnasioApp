<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard del Cliente - GimnasioApp</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/clientDashboard.css">
    <link rel="stylesheet" href="/css/notifications.css">
</head>

<body>
    <header>
        <h1>¡BIENVENIDO, <span class="username">
                <%= nombre %>
            </span>!</h1>
        <div class="welcome-text">Tu centro de control fitness</div>
        <div class="motivation-text">"El éxito comienza con la decisión de intentarlo. Cada entrenamiento te acerca a tu
            mejor versión."</div>

        <nav>
            <ul>
                <li><a href="/clientes/<%= idCliente %>/rutinas"><i class="fas fa-dumbbell"></i> Mis Rutinas</a></li>
                <li><a href="/clientes/<%= idCliente %>/progreso"><i class="fas fa-chart-line"></i> Mi Progreso</a></li>
                <li><a href="/clientes/<%= idCliente %>/dietas"><i class="fas fa-utensils"></i> Mis Dietas</a></li>
                <li>
                    <a href="/mientrenador/<%= idCliente %>/entrenador" class="nav-link-with-badge">
                        <i class="fas fa-user-tie"></i> Mi Entrenador
                    </a>
                </li>
                <li>
                    <a href="/chat/cliente-dashboard/<%= idCliente %>" class="nav-link-with-badge">
                        <i class="fas fa-comments"></i> Chat
                        <span class="chat-badge" id="chat-notification-badge" style="display: none;">0</span>
                    </a>
                </li>
                <li><a href="/ejercicios"><i class="fas fa-user-tie"></i> Mis Ejercicios</a></li>
                <li><a href="#" id="gimnasioInfoBtn"><i class="fas fa-dumbbell"></i> Mi Gimnasio</a></li>
                <li><a href="/logout"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</a></li>
            </ul>
        </nav>
    </header>

    <div class="container">
        <div class="dashboard-grid">
            <div class="card progress-card">
                <h2><i class="fas fa-trophy"></i> Tu Progreso</h2>
                <p>Revisa tus increíbles avances y mantente motivado para alcanzar tus objetivos fitness.</p>

                <div class="progress-stats">
                    <div class="stat-item">
                        <h3>Días consecutivos</h3>
                        <p>12</p>
                    </div>
                    <div class="stat-item">
                        <h3>Peso actual</h3>
                        <p>75.4 kg</p>
                    </div>
                    <div class="stat-item">
                        <h3>% Grasa</h3>
                        <p>18.2%</p>
                    </div>
                    <div class="stat-item">
                        <h3>IMC</h3>
                        <p id="imc-value">23.1</p>
                        <button id="calcular-imc-btn" class="btn btn-sm" style="margin-top: 5px; font-size: 0.8rem; padding: 3px 8px;">Calcular IMC</button>
                    </div>
                </div>

                <a href="/clientes/<%= idCliente %>/progreso" class="btn"
                    style="margin-top: 20px; align-self: flex-start;">
                    Ver detalles completos
                </a>
            </div>

            <div class="card">
                <h2><i class="fas fa-dumbbell"></i> Mis Rutinas</h2>
                <% if (typeof rutinas !== 'undefined' && rutinas && rutinas.length > 0) { %>
                    <p>Tu entrenador te ha asignado <%= rutinas.length %> rutina(s).</p>
                    <p><strong>Rutina actual:</strong> <%= rutinas[0].nombre %></p>
                <% } else { %>
                    <p>Tu entrenador aún no te ha asignado ninguna rutina.</p>
                <% } %>
                <a href="/rutinas/cliente/<%= idCliente %>" class="btn">Ver mis rutinas</a>
            </div>

            <div class="card">
                <h2><i class="fas fa-user-tie"></i> Mi Entrenador</h2>
                <% if (typeof entrenador !== 'undefined' && entrenador) { %>
                    <p>Tu entrenador asignado es <strong><%= entrenador.nombre %> <%= entrenador.apellido %></strong>.</p>
                    <p><strong>Especialidad:</strong> <%= entrenador.especialidad || 'General' %></p>
                    <p><strong>Contacto:</strong> <%= entrenador.correo %></p>
                    <div class="action-buttons" style="margin-top: 15px;">
                        <a href="/chat/cliente/<%= idCliente %>" class="btn" style="background-color: #4CAF50; color: white;">
                            <i class="fas fa-comments"></i> Chat con mi entrenador
                        </a>
                    </div>
                    <a href="/mientrenador/<%= idCliente %>/entrenador" class="btn">Ver perfil completo</a>
                <% } else { %>
                    <p>Aún no tienes un entrenador asignado. Selecciona uno para comenzar tu entrenamiento personalizado.</p>
                    <button id="seleccionarEntrenadorBtn" class="btn">Seleccionar Entrenador</button>
                <% } %>
            </div>

            <div class="card">
                <h2><i class="fas fa-utensils"></i> Plan Nutricional</h2>
                <% if (typeof dietas !== 'undefined' && dietas && dietas.length > 0) { %>
                    <p>Tienes <strong><%= dietas.length %></strong> plan(es) nutricional(es) asignado(s) por tu entrenador.</p>
                    <p><strong>Plan actual:</strong> <%= dietas[0].nombre %></p>
                    <% if (dietas[0].descripcion) { %>
                        <p><small><%= dietas[0].descripcion.substring(0, 80) %><%= dietas[0].descripcion.length > 80 ? '...' : '' %></small></p>
                    <% } %>
                <% } else { %>
                    <p>Consulta las recomendaciones alimenticias personalizadas para potenciar tus resultados.</p>
                    <p>Tu entrenador aún no te ha asignado ningún plan nutricional.</p>
                <% } %>
                <a href="/clientes/<%= idCliente %>/dietas" class="btn">Ver mis dietas</a>
            </div>

            <div class="card">
                <h2><i class="fas fa-calendar-check"></i> Próximas Citas</h2>
                <p><strong>Evaluación física:</strong> 15/06/2025</p>
                <p><strong>Sesión con entrenador:</strong> Mañana 10:00</p>
                <a href="/clientes/<%= idCliente %>/citas" class="btn">Gestionar citas</a>
            </div>

            <div class="card motivational-card">
                <div class="quote-icon"><i class="fas fa-quote-left"></i></div>
                <h2>¡Tú puedes!</h2>
                <p>"El dolor que sientes hoy será la fuerza que sentirás mañana. Cada gota de sudor es una inversión en
                    tu futuro."</p>
            </div>

            <div class="card">
                <h2><i class="fas fa-award"></i> Logros</h2>
                <p>Has completado 8 rutinas este mes y estás en el top 20% de los clientes más consistentes.</p>
                <a href="/clientes/<%= idCliente %>/logros" class="btn">Ver todos mis logros</a>
            </div>
        </div>
    </div>

    <footer>
        <div class="social-links">
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-facebook"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-youtube"></i></a>
        </div>
        <p>&copy; 2025 GimnasioApp. Todos los derechos reservados.</p>
        <p>Transformando vidas a través del fitness</p>
    </footer>

    <!-- Modal para calcular IMC -->
    <div id="imc-modal" class="modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6);">
        <div class="modal-content" style="background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); margin: 10% auto; padding: 30px; border: none; width: 90%; max-width: 450px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); font-family: 'Poppins', sans-serif;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0; color: #2c3e50; font-weight: 600; font-size: 1.8rem;">Calcula tu IMC</h2>
                <span class="close" style="color: #2c3e50; font-size: 28px; font-weight: bold; cursor: pointer; transition: color 0.3s;">&times;</span>
            </div>
            
            <div style="background-color: rgba(255,255,255,0.7); padding: 20px; border-radius: 12px; margin-bottom: 25px;">
                <p style="margin-top: 0; color: #34495e; font-size: 0.95rem;">El Índice de Masa Corporal (IMC) es un indicador que relaciona tu peso y altura para evaluar tu estado nutricional.</p>
                
                <div style="margin-bottom: 20px;">
                    <label for="peso" style="display: block; margin-bottom: 8px; color: #2c3e50; font-weight: 500;">Peso (kg):</label>
                    <div style="position: relative;">
                        <input type="number" id="peso" step="0.1" min="30" max="300" style="width: 100%; padding: 12px 15px; border: 2px solid #a4b0be; border-radius: 8px; font-size: 1rem; transition: border-color 0.3s; background-color: white;">
                        <span style="position: absolute; right: 15px; top: 12px; color: #7f8c8d;">kg</span>
                    </div>
                </div>
                
                <div style="margin-bottom: 25px;">
                    <label for="altura" style="display: block; margin-bottom: 8px; color: #2c3e50; font-weight: 500;">Altura (cm):</label>
                    <div style="position: relative;">
                        <input type="number" id="altura" step="1" min="100" max="250" style="width: 100%; padding: 12px 15px; border: 2px solid #a4b0be; border-radius: 8px; font-size: 1rem; transition: border-color 0.3s; background-color: white;">
                        <span style="position: absolute; right: 15px; top: 12px; color: #7f8c8d;">cm</span>
                    </div>
                </div>
            </div>
            
            <button id="calcular-btn" class="btn" style="width: 100%; padding: 14px; border: none; border-radius: 8px; background: linear-gradient(135deg, #0d6efd 0%, #0099ff 100%); color: white; font-weight: 600; font-size: 1.1rem; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s; box-shadow: 0 4px 6px rgba(13, 110, 253, 0.2);">Calcular mi IMC</button>
            
            <div id="resultado-imc" style="display: none; margin-top: 25px; padding: 20px; border-radius: 12px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                <div style="margin-bottom: 10px;">
                    <span style="font-size: 2.5rem; font-weight: 700; line-height: 1;" id="valor-imc"></span>
                </div>
                <p id="categoria-imc" style="margin: 10px 0 0; font-size: 1.1rem; font-weight: 500;"></p>
                <p style="margin-top: 15px; font-size: 0.9rem; color: #555;">Recuerda que el IMC es solo un indicador. Consulta con un profesional para una evaluación completa.</p>
            </div>
        </div>
    </div>

    <!-- Modal para seleccionar entrenador -->
    <div id="entrenador-modal" class="modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6);">
        <div class="modal-content" style="background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); margin: 10% auto; padding: 30px; border: none; width: 90%; max-width: 600px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); font-family: 'Poppins', sans-serif;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0; color: #2c3e50; font-weight: 600; font-size: 1.8rem;">Selecciona tu Entrenador</h2>
                <span class="close-entrenador-modal" style="color: #2c3e50; font-size: 28px; font-weight: bold; cursor: pointer; transition: color 0.3s;">&times;</span>
            </div>
            
            <div style="background-color: rgba(255,255,255,0.7); padding: 20px; border-radius: 12px; margin-bottom: 25px;">
                <p style="margin-top: 0; color: #34495e; font-size: 0.95rem;">Selecciona un entrenador para comenzar tu entrenamiento personalizado. Esta selección es permanente y no podrás cambiarla después.</p>
                
                <div id="entrenadores-container" style="margin-top: 20px;">
                    <p>Cargando entrenadores disponibles...</p>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/clientDashboard.js"></script>
    
    <script>
        // Funcionalidad para el modal de selección de entrenador
        document.addEventListener('DOMContentLoaded', function() {
            const seleccionarBtn = document.getElementById('seleccionarEntrenadorBtn');
            const entrenadorModal = document.getElementById('entrenador-modal');
            const closeEntrenadorModal = document.querySelector('.close-entrenador-modal');
            const entrenadoresContainer = document.getElementById('entrenadores-container');
            
            if (seleccionarBtn) {
                seleccionarBtn.addEventListener('click', function() {
                    entrenadorModal.style.display = 'block';
                    cargarEntrenadores();
                });
            }
            
            if (closeEntrenadorModal) {
                closeEntrenadorModal.addEventListener('click', function() {
                    entrenadorModal.style.display = 'none';
                });
            }
            
            // Cerrar modal al hacer clic fuera de él
            window.addEventListener('click', function(event) {
                if (event.target === entrenadorModal) {
                    entrenadorModal.style.display = 'none';
                }
            });
            
            // Función para cargar entrenadores disponibles
            function cargarEntrenadores() {
                fetch('/api/entrenadores/listar')
                    .then(response => response.json())
                    .then(entrenadores => {
                        if (entrenadores.length === 0) {
                            entrenadoresContainer.innerHTML = '<p>No hay entrenadores disponibles en este momento.</p>';
                            return;
                        }
                        
                        let html = '<div class="entrenadores-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px;">';
                        
                        entrenadores.forEach(entrenador => {
                            const nombre = entrenador.usuario ? `${entrenador.usuario.nombre} ${entrenador.usuario.apellido}` : 'Entrenador';
                            const especialidad = entrenador.especialidad || 'Entrenamiento general';
                            const experiencia = entrenador.experienciaAnios ? `${entrenador.experienciaAnios} años de experiencia` : '';
                            
                            html += `
                                <div class="entrenador-card" style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
                                    <div style="font-weight: bold; font-size: 1.2rem; margin-bottom: 10px;">${nombre}</div>
                                    <div style="color: #666; margin-bottom: 5px;">Especialidad: ${especialidad}</div>
                                    <div style="color: #666; margin-bottom: 15px;">${experiencia}</div>
                                    <button 
                                        class="seleccionar-entrenador-btn" 
                                        data-entrenador-id="${entrenador._id}"
                                        style="background: #0d6efd; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; width: 100%;"
                                    >
                                        Seleccionar
                                    </button>
                                </div>
                            `;
                        });
                        
                        html += '</div>';
                        entrenadoresContainer.innerHTML = html;
                        
                        // Agregar event listeners a los botones de selección
                        document.querySelectorAll('.seleccionar-entrenador-btn').forEach(btn => {
                            btn.addEventListener('click', function() {
                                const entrenadorId = this.getAttribute('data-entrenador-id');
                                seleccionarEntrenador(entrenadorId);
                            });
                        });
                    })
                    .catch(error => {
                        console.error('Error al cargar entrenadores:', error);
                        entrenadoresContainer.innerHTML = '<p>Error al cargar entrenadores. Inténtalo de nuevo más tarde.</p>';
                    });
            }
            
            // Función para seleccionar un entrenador
            function seleccionarEntrenador(entrenadorId) {
                const clienteId = '<%= idCliente %>';
                
                fetch(`/api/clientes/${clienteId}/seleccionar-entrenador`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ entrenadorId })
                })
                .then(response => {
                    if (!response.ok) {
                        return response.json().then(err => { throw new Error(err.error || 'Error al seleccionar entrenador'); });
                    }
                    return response.json();
                })
                .then(data => {
                    alert('Entrenador seleccionado correctamente. La página se recargará para mostrar los cambios.');
                    window.location.reload();
                })
                .catch(error => {
                    alert(error.message || 'Error al seleccionar entrenador. Inténtalo de nuevo más tarde.');
                });
            }
        });
    </script>
    
    <!-- Modal para información del gimnasio -->
    <div id="gimnasioModal" class="modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6);">
        <div style="background: white; margin: 5% auto; padding: 20px; width: 90%; max-width: 800px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
            <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #2b5876; padding-bottom: 10px; margin-bottom: 20px;">
                <h2 style="margin: 0; color: #2b5876; font-weight: 700;">Información del Gimnasio</h2>
                <span class="close" style="color: #2c3e50; font-size: 28px; font-weight: bold; cursor: pointer; transition: color 0.3s;">&times;</span>
            </div>
            <div id="gimnasioModalContent" style="max-height: 70vh; overflow-y: auto; color: #333;">
                <!-- Contenido cargado dinámicamente -->
            </div>
        </div>
    </div>

    <!-- Socket.IO -->
    <script src="/socket.io/socket.io.js"></script>
    
    <!-- Sistema de Notificaciones -->
    <script src="/js/notifications.js"></script>
    <script>
        // Pasar el ID del cliente al sistema de notificaciones
        window.userId = '<%= idCliente %>';

        // Modal de información del gimnasio
        document.addEventListener('DOMContentLoaded', function() {
            const gimnasioModal = document.getElementById('gimnasioModal');
            const gimnasioModalContent = document.getElementById('gimnasioModalContent');
            const gimnasioInfoBtn = document.getElementById('gimnasioInfoBtn');
            const closeBtn = gimnasioModal.querySelector('.close');

            gimnasioInfoBtn.addEventListener('click', function(e) {
                e.preventDefault();
                // Cargar la información del gimnasio
                fetch('/gimnasio/info/data')
                    .then(response => response.json())
                    .then(data => {
                        // Crear el contenido HTML
                        let html = `
                            <div style="text-align: center; margin-bottom: 30px; background: linear-gradient(to right, #2b5876, #4e4376); padding: 20px; border-radius: 10px; color: white;">
                                <h3 style="margin-bottom: 10px; font-weight: 700; font-size: 28px;">${data.nombre}</h3>
                                <p style="font-style: italic; font-size: 16px;">${data.slogan}</p>
                            </div>
                            
                            <div style="margin-bottom: 30px; background: #f9f9f9; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                                <h4 style="color: #2b5876; border-bottom: 2px solid #00c6ff; padding-bottom: 10px; margin-bottom: 15px; font-weight: 600;">
                                    <i class="fas fa-info-circle" style="color: #00c6ff; margin-right: 10px;"></i>Sobre Nosotros
                                </h4>
                                <p style="color: #333; line-height: 1.6;">${data.descripcion}</p>
                            </div>
                            
                            <div style="display: flex; flex-wrap: wrap; margin-bottom: 30px;">
                                <div style="flex: 1; min-width: 250px; margin-right: 20px; margin-bottom: 20px; background: #f9f9f9; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                                    <h4 style="color: #2b5876; border-bottom: 2px solid #00c6ff; padding-bottom: 10px; margin-bottom: 15px; font-weight: 600;">
                                        <i class="fas fa-map-marker-alt" style="color: #00c6ff; margin-right: 10px;"></i>Ubicación
                                    </h4>
                                    <p style="color: #333; line-height: 1.6;">
                                        ${data.direccion.calle} ${data.direccion.numero}<br>
                                        ${data.direccion.colonia}<br>
                                        ${data.direccion.ciudad}, ${data.direccion.estado}<br>
                                        C.P. ${data.direccion.codigoPostal}
                                    </p>
                                    
                                    <!-- Google Maps -->
                                    <div style="margin-top: 15px; width: 100%; height: 200px; border-radius: 10px; overflow: hidden;">
                                        <iframe 
                                            src="${data.direccion.googleMapsUrl}" 
                                            width="100%" 
                                            height="100%" 
                                            style="border:0;" 
                                            allowfullscreen="" 
                                            loading="lazy">
                                        </iframe>
                                    </div>
                                </div>
                                
                                <div style="flex: 1; min-width: 250px; background: #f9f9f9; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                                    <h4 style="color: #2b5876; border-bottom: 2px solid #00c6ff; padding-bottom: 10px; margin-bottom: 15px; font-weight: 600;">
                                        <i class="fas fa-clock" style="color: #00c6ff; margin-right: 10px;"></i>Horarios
                                    </h4>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; color: #333;">
                                        <span style="font-weight: 600;">Lunes</span>
                                        <span>${data.horarios.lunes}</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; color: #333;">
                                        <span style="font-weight: 600;">Martes</span>
                                        <span>${data.horarios.martes}</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; color: #333;">
                                        <span style="font-weight: 600;">Miércoles</span>
                                        <span>${data.horarios.miercoles}</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; color: #333;">
                                        <span style="font-weight: 600;">Jueves</span>
                                        <span>${data.horarios.jueves}</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; color: #333;">
                                        <span style="font-weight: 600;">Viernes</span>
                                        <span>${data.horarios.viernes}</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; color: #333;">
                                        <span style="font-weight: 600;">Sábado</span>
                                        <span>${data.horarios.sabado}</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; color: #333;">
                                        <span style="font-weight: 600;">Domingo</span>
                                        <span>${data.horarios.domingo}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin-bottom: 30px; background: #f9f9f9; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                                <h4 style="color: #2b5876; border-bottom: 2px solid #00c6ff; padding-bottom: 10px; margin-bottom: 15px; font-weight: 600;">
                                    <i class="fas fa-tag" style="color: #00c6ff; margin-right: 10px;"></i>Planes y Precios
                                </h4>
                                <div style="display: flex; flex-wrap: wrap; gap: 20px;">
                                    ${data.planes.map(plan => `
                                        <div style="flex: 1; min-width: 250px; background: white; border-radius: 10px; padding: 20px; box-shadow: 0 3px 10px rgba(0,0,0,0.1); ${plan.destacado ? 'border: 2px solid #00c6ff; transform: scale(1.03);' : ''}">
                                            ${plan.destacado ? '<div style="background: #00c6ff; color: white; display: inline-block; padding: 5px 10px; border-radius: 20px; font-size: 0.8rem; margin-bottom: 10px; font-weight: 600;">Más Popular</div>' : ''}
                                            <h5 style="margin-bottom: 10px; color: #2b5876; font-weight: 700;">${plan.nombre}</h5>
                                            <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 10px; color: #333;">$${plan.precio} <span style="font-size: 0.9rem; color: #666; font-weight: normal;">/${plan.duracion}</span></div>
                                            <p style="color: #666; margin-bottom: 15px;">${plan.descripcion}</p>
                                            <ul style="padding-left: 20px; margin-bottom: 15px; color: #333;">
                                                ${plan.caracteristicas.map(caracteristica => `<li style="margin-bottom: 5px;"><i class="fas fa-check" style="color: #00c6ff; margin-right: 5px;"></i>${caracteristica}</li>`).join('')}
                                            </ul>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <div style="background: #f9f9f9; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                                <h4 style="color: #2b5876; border-bottom: 2px solid #00c6ff; padding-bottom: 10px; margin-bottom: 15px; font-weight: 600;">
                                    <i class="fas fa-phone" style="color: #00c6ff; margin-right: 10px;"></i>Contacto
                                </h4>
                                <p style="color: #333; margin-bottom: 10px;"><i class="fas fa-phone" style="width: 25px; color: #00c6ff;"></i> ${data.contacto.telefono}</p>
                                <p style="color: #333; margin-bottom: 10px;"><i class="fas fa-envelope" style="width: 25px; color: #00c6ff;"></i> ${data.contacto.email}</p>
                                ${data.contacto.whatsapp ? `<p style="color: #333; margin-bottom: 10px;"><i class="fab fa-whatsapp" style="width: 25px; color: #25D366;"></i> ${data.contacto.whatsapp}</p>` : ''}
                                <div style="margin-top: 20px;">
                                    ${data.redesSociales && data.redesSociales.facebook ? `<a href="${data.redesSociales.facebook}" target="_blank" style="color: #3b5998; font-size: 1.8rem; margin-right: 20px;"><i class="fab fa-facebook-square"></i></a>` : ''}
                                    ${data.redesSociales && data.redesSociales.instagram ? `<a href="${data.redesSociales.instagram}" target="_blank" style="color: #e1306c; font-size: 1.8rem; margin-right: 20px;"><i class="fab fa-instagram"></i></a>` : ''}
                                    ${data.redesSociales && data.redesSociales.twitter ? `<a href="${data.redesSociales.twitter}" target="_blank" style="color: #1da1f2; font-size: 1.8rem; margin-right: 20px;"><i class="fab fa-twitter-square"></i></a>` : ''}
                                </div>
                            </div>
                        `;
                        
                        gimnasioModalContent.innerHTML = html;
                        gimnasioModal.style.display = 'block';
                    })
                    .catch(error => {
                        console.error('Error al cargar la información del gimnasio:', error);
                        gimnasioModalContent.innerHTML = '<p>Error al cargar la información del gimnasio. Inténtalo de nuevo más tarde.</p>';
                        gimnasioModal.style.display = 'block';
                    });
            });

            // Cerrar el modal
            closeBtn.addEventListener('click', function() {
                gimnasioModal.style.display = 'none';
            });

            // Cerrar el modal al hacer clic fuera del contenido
            window.addEventListener('click', function(event) {
                if (event.target === gimnasioModal) {
                    gimnasioModal.style.display = 'none';
                }
            });
        });
    </script>
</body>

</html>